syntax = "proto3";

package skylr_shard.v1;

option go_package = "./skylr-shard;pbshard";

import "google/protobuf/duration.proto";

// Shard - gprc shard service
service Shard {
    // Get returns Entry by provided key
    rpc Get(GetRequest) returns (GetResponse);
    // Set uploads new entry to storage
    rpc Set(SetRequest) returns (SetResponse);
}

// GetRequest - get request params
message GetRequest {
    string key = 1;
}

// GetResponse - get request response
message GetResponse {
    Entry entry = 1;
}

// SetRequest - set request params
message SetRequest {
    Entry entry = 1;
}

// SetResponse - set request response
message SetResponse {
}

// Entry - storage entry
message Entry {
    // key
    string key = 1;
    // value
    oneof value {
        // str value
        string value_str = 2;
        // int32 value
        int32 value_int32 = 3;
        // int64 value
        int64 value_int64 = 4;
        // float32 value
        float value_float = 5;
        // float64 value
        double value_double = 6;
    }
    // ttl
    google.protobuf.Duration ttl = 7;
}